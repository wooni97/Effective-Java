# 아이템 43. 람다보다는 메서드 참조를 사용하라

### 메서드 참조란

- Java8에 도입된 메서드 참조는 class::methodName 구문을 사용하여 클래스 또는 객체에서 메서드를 참조할 수 있는 것.
- 실행하려는 메소드를 참조해서 매개 변수의 정보 및 리턴 타입을 알아내어, 람다식에서 굳이 선언이 불필요한 부분을 생략하는 것을 말한다.

### 메서드 참조를 이용하면 람다보다도 간결하게 함수 객체를 만들 수 있다

다음은 메서드 참조를 이용하여 코드를 간결하게 만든느 예시이다.

```java
map.merge(key, 1, (count, incr) -> count, incr);
```

merge 메서드는 키, 값, 함수를 인수로 받으며, 주어진 키가 맵 안에 아직 없다면 주어진 {키, 값} 쌍을 그대로 저장한다.

반대로 키가 이미 있다면 (세번째 인수로 받은) 함수를 현재 값과 주어진 값에 적용한 다음, 그 결과로 현재 값을 덮어쓴다.

매개 변수 count, incr은 크게 하는 일 없이 공간을 꽤 차지한다. 사실 이 람다는 두 인수의 합을 단순히 반환할 뿐이다.

```java
map.merge(key, 1, Intger::sum);
```

Java 8부터 Integer 클래스는 이 람다와 기능이 같은 정적 메서드 sum을 제공하기 시작했다.

따라서 람다 대신 이 메서드이 참조를 전달하면 똑같은 결과를 더 보기 좋게 얻을 수 있다.

> 매개변수 수가 늘어날수록 메서드 참조로 제거할 수 있는 코드양도 늘어난다.
하지만 어떤 람다에서는 매개변수의 이름 자체가 프로그래머에게 좋은 가이드가 되기도 한다.
>
>
> 메서드 참조를 사용하는 편이 보통은 더 짧고 간결하므로, 람다로 구현했을 때 너무 길거나 복잡하다면 메서드 참조가 좋은 대안이 되어준다.
>

### 람다가 메서드 참조보다 간결할 경우

주로 메서드와 람다가 같은 클래스에 있을 때 그렇다.

예를 들어 다음 코드가 `GoshThisClassNameIsHumongus` 클래스 안에 있다고 해보자.

```java
serivce.execute(GoshThisClassNameIsHumongus::action);
```

이를 람다로 대체하면 다음처럼 된다.

```java
service.execute(() -> action());
```

메서드 참조 쪽은 더 짧지도, 더 명확하지도 않다. 따라서 람다 쪽이 낫다.

### 메서드 참조 유형 5가지

| 메서드 참조 유형 | 예 | 같은 기능을 하는 람다 |
| --- | --- | --- |
| 정적 메서드 참조 | Integer::parseInt | str -> Integer.parseInt(str) |
| 한정적(인스턴스) | Instant.now()::isAfter | Instant then = Instant.now();
t -> then.isAfter(t) |
| 비한정적(인스턴스) | String::toLowerCase | str -> str.toLowerCase() |
| 생성자 참조 | TreeMap<K,V>::new | () -> new TreeMap<K,V>() |
| 배열 생성자 | int[]::new | len -> new int[len] |

- 정적 메서드 참조
- 수신 객체(receiving object)를 특정하는 한정적 인스턴스 메서드 참조
    - 근본적으로 정적 참조와 비슷하다.
    - 함수 객체가 받는 인수와 참조되는 메서드가 받는 인수가 똑같다.
- 수신 객체를 특정하지 않는 비한정적 인스턴스 메서드 참조
    - 함수 객체를 적용하는 시점에 수신 객체를 알려준다.
    - 이를 위해 수신 객체 전달용 매개변수가 매개변수 목록의 첫 번재로 추가되며, 그 뒤로는 참조되는 메서드 선언에 정의된 매개변수들이 뒤따른다.
    - 주로스트림 파이프라인에서의 매핑과 필터 함수에 쓰인다.
- 클래스 생성자를 가리키는 메서드 참조
- 배열 생성자를 가리키는 메서드 참조